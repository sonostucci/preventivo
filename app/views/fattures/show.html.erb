<div id="pdfpreventivo">
<html>
<head>
    <title>Fatture</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
    <link href="main.css" type="text/css" rel="stylesheet">
</head>







<br>
<center>
<div class="container-fluid">
<h1>Preventivo</h1>
</div>
</center>


<br>



<br>
<hr>
<br>






<div class="container-fluid">
    <div class="row">
        <div class="col-7">
            <b style="color: #818181"><p style="font-size: 17px; margin: 0 auto">Artigiana Edile Snc</p></b>
                <p style="font-size: 14px; font-weight: 500; color: #484848;">Artigiana Edile Di Scuccato Fabrizio & C. Snc Via Strada Brussa 438</p>
                <br>
            <p style="font-size: 13px; color: #484848; font-weight: 500; text-decoration: none">
                P.IVA: 02869350278
            <br>
                Fax 0421 705547
            <br>
                Cel 336 375810 Fabrizio
            <br>
                Cel 335 1302104 Luisito
            <br>
                Email fabrizio.scuccato@libero.it
            <br>
            </p>
        </div>

        <div class="col-5">
            <div class="row">
                <div class="col-sm">
                    <p style="font-size: 15px; color: gray; font-weight: 400">Data:</p>
                </div>
                <div class="col-sm">
                        <p style="font-size: 15px; color: dimgray; font-weight: 500">
                        <%= 
                        require 'date'

                        current_time = DateTime.now

                        current_time.strftime "%d/%m/%Y"

                        %>
                                                </p>
                </div>
            </div>
        </div>
    </div>
</div>

<br>

    <div class="row" style="width: 100%">

        <div class="col-6 border border-secondary border-2 margine rounded" style="padding-top: 10px">
            <div class="row">
                <div class="col-4">
                    <p style="color: #484848; font-weight: 400; font-size: 16px">Spett.le</p>
                </div>
                <div class="col-8">
                    <b style="color: #484848; font-size: 15px">
                    <%= @fatture.spettabile %>
                </b>
                    </b>
                    <br>
                    <br>
                    <br>
                </div>
            </div>
        </div>

        <div class="col-7">
        </div>

    </div>


    <br>
    <br>

    <div class="container-fluid" style="color: #515151; font-weight: 500">
        <div class="row">
            <div class="col-2">
                Codice
            </div>
            <div class="col-4">
                Descrizione
            </div>
            <div class="col-2">
                Quantità
            </div>
            <div class="col-2">
                Prezzo
            </div>
            <div class="col-2">
                Importo
            </div>
        </div>
    </div>

    <div style="padding-bottom: 15px"></div>

    <!---   Questo è il nome lavoro ---->

    <div class="container-fluid" style="font-size: 13px; font-weight: 450;">
        <div class="row">
            <div class="col-2">
            </div>
            <div class="col-4">
              <b><%= @fatture.nomelavoro %></b>
            </div>
            <div class="col-2">
            </div>
            <div class="col-2">
            </div>
            <div class="col-2">
            </div>
        </div>
    </div>

<div style="font-size: 13px; font-weight: bold;">
        
        
       
           <div class="container-fluid">
            <div class="row">
                <div class="col-2">
                    
                </div>
                <div class="col-4">
                    <%= @fatture.descrizione %>
                </div>
                <div class="col-2">
                     <%= @fatture.quantita %>
                </div>
                <div class="col-2">
                    <%= @fatture.prezzo %>€
                </div>
                <div class="col-2">
                    <%= @importo1 = @fatture.quantita * @fatture.prezzo %>€
                </div>
            </div>
        </div>

</div>
    <br>
    <br>

    <hr>







   
    <div class="container-fluid">
        <div class="row sinistra">
            <div class="col-7">
            </div>
            <div class="col-2">
                <p style="color: dimgrey">Imponibile</p>
            </div>
            <div class="col-2">
                <p style="font-weight: 500">
                €<%= @Imponibile = @importo1 %>
                </p>
            </div>
            <div class="col-1">

            </div>
        </div>
    </div>


    <div class="container-fluid">
        <div class="row sinistra">
            <div class="col-7">
            </div>
            <div class="col-2">
                <p style="color: dimgrey">IVA(<%= @fatture.iva %>%)</p>
            </div>
            <div class="col-2">
                <p style="font-weight: 500">
                €<%= @euroiva = @Imponibile * @fatture.iva / 100 %>
                </p>
            </div>
            <div class="col-1">

            </div>
        </div>
    </div>



    <div class="container-fluid">
        <div class="row sinistra">
            <div class="col-7">
            </div>
            <div class="col-2">
                <b><p style="color: dimgrey; font-size: 18px">Totale</p></b>
            </div>
            <div class="col-2">
                <b>
                €<%= @euroiva + @Imponibile  %>
                </b>
            </div>
            <div class="col-1">

            </div>
        </div>
    </div>
</div>







<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>



</div>






<script>

    window.onload = function () {
        document.getElementById("download")
            .addEventListener("click", () => {
                const invoice = this.document.getElementById("pdfpreventivo");
                console.log(pdfpreventivo);
                console.log(window);
                var opt = {
                    margin: 0.3,
                    filename: 'preventivo.pdf',
                    image: { type: 'jpeg', quality: 100.8 },
                    html2canvas: { scale: 2 },
                    jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
                };
                html2pdf().from(invoice).set(opt).save();
            })
    }





</script>




<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.2/jspdf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
</html>







<div class="bg-info fixed-bottom">
<br>
<div class="container">
     <div class="row">
       <div class="col-12">
            <button class="btn btn-dark btn-outline-light w-100" id="download">Scarica il PDF</button>
            </div>
            </div>
            <br>
    <div class="row">
     <div class="col-6">
      <%= link_to 'Modifica', edit_fatture_path(@fatture),  class:'btn btn-dark btn-outline-light w-100' %>
    </div>
    <div class="col-6">
    <%= link_to 'Tutti i preventivi', fattures_path, class:'btn btn-dark btn-outline-light w-100' %>
    </div>
  </div>
</div>
<br>
</div

